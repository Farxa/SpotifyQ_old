(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n(69),o=n.n(i),s=(n(79),n(14)),a=n(12),r=(n(80),n(2)),l=n(70),j=n.n(l),u="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("ea28d4ba34f34b44b59c640052c6e098","&redirect_uri=").concat("https://spotifiq.herokuapp.com/","&scope=").concat(["streaming","playlist-modify-public","ugc-image-upload","user-read-email","user-read-private","user-read-currently-playing","user-read-recently-played","user-read-playback-state","user-modify-playback-state"].join("%20"),"&response_type=token&show_dialog=true"),d=n(21),b=n(40),h=(n(109),n(15)),f=n.n(h),p=n(0);function O(e){var t=Object(c.useState)(""),n=Object(a.a)(t,2),i=n[0],o=n[1],s=Object(c.useState)([]),r=Object(a.a)(s,2),l=r[0],j=r[1],u=Object(c.useState)([]),h=Object(a.a)(u,2),O=h[0],g=h[1],v=Object(c.useState)([]),k=Object(a.a)(v,2),m=k[0],y=k[1],w=Object(c.useState)(""),C=Object(a.a)(w,2),T=C[0],I=C[1],A=e.token,P=Object(c.useState)(""),N=Object(a.a)(P,2),S=N[0],_=N[1];console.log("API",e.spotifyAPI),Object(c.useEffect)((function(){e.socket.on("track added",(function(e){g((function(t){return[].concat(Object(b.a)(t),[e.track])}))})),e.match.params.inviteCode&&f.a.get("/api/auth/".concat(e.match.params.inviteCode)).then((function(t){console.log("This is the selectedDevice",t.data.selectedDevice),console.log("This is the token",t.data.token),I(t.data.selectedDevice),e.spotifyAPI.setAccessToken(t.data.token)})).catch((function(e){_(e)}))}),[]);var q=Object(c.useState)(""),Q=Object(a.a)(q,2),B=Q[0],D=Q[1],L="https://spotifiq.herokuapp.com/".concat(B);return S?Object(p.jsxs)("div",{className:"svenContainer",children:[Object(p.jsx)("img",{style:{height:"400px"},src:"https://www.fazemag.de/wp-content/uploads/2016/02/sven_marquardt_c_mitteldeutscher_verlag__1000.jpg",alt:"Sven Marquardt"}),Object(p.jsx)("br",{}),Object(p.jsx)("h1",{style:{textAlign:"center"},children:"Heute leider nicht"})]}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"containerQ",children:[Object(p.jsxs)("div",{className:"flexItem1 device",children:[Object(p.jsxs)("div",{className:"deviceContainer",children:[Object(p.jsxs)("button",{style:{marginBottom:"20px"},onClick:function(){e.spotifyAPI.getMyDevices().then((function(e){y(e.body.devices)}))},children:["Select a device  ",Object(p.jsx)("i",{class:"far fa-hand-pointer"})]}),m.length>0&&Object(p.jsxs)("select",{name:"device",id:"",onChange:function(e){I(e.target.value)},children:[Object(p.jsx)("option",{value:"",children:"Choose a device"}),m.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name})}))]})]}),Object(p.jsxs)("div",{className:"inviteContainer",children:[Object(p.jsx)("div",{children:Object(p.jsx)("button",{style:{marginBottom:"20px"},onClick:function(e){var t={selectedDevice:T,token:A,inviteCode:B};f.a.post("/api/queue",t).then((function(e){D(e.data.inviteCode)})).catch((function(e){return console.log(e)}))},children:"Invite friends to join your Q"})}),B&&Object(p.jsx)("div",{children:Object(p.jsxs)("div",{onClick:function(){navigator.clipboard.writeText(L)},children:[Object(p.jsx)("input",Object(d.a)({style:{marginRight:"15px"},type:"text",value:L,id:"createdQ"},"style",{width:"160px"})),Object(p.jsx)("i",{style:{fontSize:"25px",paddingLeft:"10px",cursor:"pointer"},class:"fas fa-copy"})]})})]})]}),Object(p.jsxs)("div",{className:"flexItem2 searchContainer",children:[Object(p.jsx)("input",{style:{width:"185px",marginBottom:"20px"},value:i,onChange:function(e){return o(e.target.value)}}),Object(p.jsx)("button",{button:!0,onClick:function(){e.spotifyAPI.searchTracks(i).then((function(e){console.log("TRACKS:",e.body.tracks.items),j(e.body.tracks.items)}),(function(e){console.error(e)}))},children:Object(p.jsx)("i",{class:"fa fa-search"})}),Object(p.jsx)("div",{children:l.map((function(t){return Object(p.jsx)("div",{className:"searchResults",children:Object(p.jsxs)("div",{className:"addTrack",onClick:function(){return function(t){O.find((function(e){return e.id===t.id}))||(g([].concat(Object(b.a)(O),[t])),e.socket.emit("new track",{track:t}),e.spotifyAPI.addToQueue(t.uri).then((function(e){console.log(e)})))}(t)},children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("i",{style:{float:"left",fontSize:"25px",marginRight:"6px",marginTop:"3px"},class:"fas fa-plus-circle"}),Object(p.jsx)("h4",{children:t.name})]}),Object(p.jsx)("div",{children:Object(p.jsxs)("p",{children:["\ud83c\udfa4 ",t.artists[0].name]})})]})},t.id)}))})]}),Object(p.jsxs)("div",{className:" flexItem3 Queue",children:[Object(p.jsx)("h2",{children:"Queue"}),O.map((function(e){return Object(p.jsx)("ul",{className:"queueTracks",children:Object(p.jsx)("li",{children:Object(p.jsx)("p",{children:e.name})})})}))]})]}),Object(p.jsxs)("div",{style:x,children:[Object(p.jsx)("button",{type:"button",onClick:function(){e.spotifyAPI.skipToPrevious().then((function(e){console.log("skip to previous track",e)}),(function(e){console.log(e)}))},children:Object(p.jsx)("i",{className:"fa fa-backward fa-lg"})}),Object(p.jsx)("button",{type:"button",onClick:function(){e.spotifyAPI.transferMyPlayback([T],{play:!0}).then((function(){console.log("Transfering playback to "+T)}),(function(e){console.log("Something went wrong!",e)}))},children:Object(p.jsx)("i",{className:"fa fa-play fa-lg"})}),Object(p.jsx)("button",{type:"button",onClick:function(){e.spotifyAPI.transferMyPlayback([T],{play:!1}).then((function(){console.log("Transfering playback to "+T)}),(function(e){console.log("Something went wrong!",e)}))},children:Object(p.jsx)("i",{className:"fa fa-pause fa-lg"})}),Object(p.jsx)("button",{type:"button",onClick:function(){e.spotifyAPI.skipToNext().then((function(e){console.log("skip to next track",e)}),(function(e){console.log(e)}))},children:Object(p.jsx)("i",{className:"fa fa-forward fa-lg"})})]})]})}var x={position:"fixed",bottom:"0",left:"0",height:"15px",background:"black",color:"white",width:"100% ",paddingBottom:"90px",textAlign:"center"};function g(e){return Object(p.jsx)("div",{style:{flexGrow:"1",padding:"15px"},children:Object(p.jsx)(O,Object(s.a)(Object(d.a)({spotifyAPI:e.spotifyAPI,socket:e.socket,token:e.token,setToken:e.setToken},"spotifyAPI",e.spotifyAPI),e))})}var v=n(74),k=["component","user","path","token","redirectPath"],m=function(e){var t=e.component,n=(e.user,e.path),c=e.token,i=e.redirectPath,o=void 0===i?"/login":i,a=Object(v.a)(e,k);return Object(p.jsx)(r.b,{exact:!0,path:n,render:function(e){return c?Object(p.jsx)(t,Object(s.a)(Object(s.a)(Object(s.a)({},e),a),{},{token:c})):Object(p.jsx)(r.a,{to:o})}})},y=n(17);n(133);function w(e){var t=function(){f.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setToken(null)}))};return Object(p.jsx)("nav",{className:"containerSidebar",children:e.token?Object(p.jsxs)("div",{className:"links",children:[Object(p.jsx)(y.b,{to:"/queue",children:Object(p.jsx)("button",{style:{width:"160px"},children:"Create a Queue"})}),Object(p.jsx)(y.b,{to:"/",onClick:function(){return t()},children:Object(p.jsx)("button",{style:{width:"160px",marginTop:"20px"},children:"Logout"})})]}):Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"links",children:Object(p.jsx)("a",{href:u,children:Object(p.jsx)("button",{style:{width:"160px",marginTop:"30px"},children:"LOGIN WITH SPOTIFY"})})})})})}n(134);function C(e){return Object(p.jsx)("div",{className:"center-div",children:e.token?Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Welcome to SpotifyQ"}),Object(p.jsx)("br",{}),Object(p.jsxs)("h3",{children:["\u26a0 Open your Spotify in the background",Object(p.jsx)("h4",{children:"to be able to connect your device and queue up tracks when joining or creating a Queue"})]})]}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Welcome to SpotifyQ"}),Object(p.jsx)("br",{}),Object(p.jsx)("h3",{children:"Login with your Spotify to continue"})]})})}var T=n(73),I=n.n(T),A=new j.a({ClientId:"ea28d4ba34f34b44b59c640052c6e098"}),P=I()("https://spotifiq.herokuapp.com/");var N=function(e){var t=Object(c.useState)(null),n=Object(a.a)(t,2),i=n[0],o=n[1];console.log("THE TOKEN:",i),Object(c.useEffect)((function(){var e=window.location.hash.substring(1).split("&").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),{});window.location.hash="";var t=e.access_token;t&&(o(t),A.setAccessToken(t))}),[]);var l=Object(c.useState)(e.user),j=Object(a.a)(l,2),u=j[0],d=(j[1],function(e){o(e)});return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(w,{token:i,setToken:d}),Object(p.jsxs)(r.d,{children:[Object(p.jsx)(m,{path:"/queue",user:u,token:i,spotifyAPI:A,socket:P,component:g}),Object(p.jsx)(r.b,{exact:!0,path:"/:inviteCode",render:function(e){return Object(p.jsx)(g,Object(s.a)({token:i,socket:P,setToken:d,spotifyAPI:A},e))}}),Object(p.jsx)(r.b,{exact:!0,path:"/",render:function(e){return Object(p.jsx)(C,Object(s.a)({token:i},e))}})]}),Object(p.jsx)("footer",{className:"footer",children:"Created by Rahaf Abu Alhassan"})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),o(e),s(e)}))};f.a.get("/api/auth/loggedin").then((function(e){console.log("logged in user: ",e.data);e.data;o.a.render(Object(p.jsx)(y.a,{children:Object(p.jsx)(N,{})}),document.getElementById("root"))})),S()},79:function(e,t,n){},80:function(e,t,n){},97:function(e,t){}},[[160,1,2]]]);
//# sourceMappingURL=main.89754ac4.chunk.js.map